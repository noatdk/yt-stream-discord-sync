# YouTube Stream Discord Sync

YouTubeライブストリームの再生とDiscordメッセージを同期し、現在のストリームタイムスタンプに一致するメッセージに自動的にスクロールします。

## 概要

このプロジェクトは2つのコンポーネントで構成されています：

1. **YouTube Userscript** - YouTube上で実行され、現在のストリームタイムスタンプをローカルサーバーに送信
2. **Vencord Plugin** - サーバーからタイムスタンプを受信し、一致するメッセージにDiscordを自動スクロール

## 前提条件

- **Vencord** がDiscordにインストールされ、設定されていること
- ブラウザに **Tampermonkey**（または類似のユーザースクリプトマネージャー）がインストールされていること
- **Node.js**（Vencordプラグインのビルド用）

## インストール

### ステップ1: Vencordプラグインのインストール

1. `YouTubeTimestampServer` フォルダをVencordのuserpluginsディレクトリにコピーします：
   ```
   Vencord/src/userplugins/YouTubeTimestampServer/
   ```

2. Vencordをビルドします：
   ```bash
   cd Vencord
   pnpm install
   pnpm build
   pnpm inject
   ```

3. Discordを再起動します

### ステップ2: YouTube Userscriptのインストール

1. Tampermonkey（またはユーザースクリプトマネージャー）を開きます
2. 「新しいスクリプトを作成」をクリックします
3. `youtube-timestamp-server.user.js` の内容全体をエディタにコピーします
4. スクリプトを保存します（Ctrl+S または Cmd+S）

## 設定

### Vencordプラグイン設定

1. Discord設定を開きます
2. **Vencord** → **Plugins** に移動します
3. **YouTubeTimestampServer** を見つけて設定します：
   - **タイムスタンプ自動スクロールを有効にする**: 自動スクロールの有効/無効を切り替え
   - **チェック間隔**: 新しいタイムスタンプをチェックする頻度（デフォルト: 2秒）
   - **サーバーポート**: ローカルサーバーのポート（デフォルト: 8080）

### Userscript設定

Userscriptはデフォルトでポート `8080` を使用します。変更する必要がある場合：

1. Tampermonkeyでスクリプトを開きます
2. 行を見つけます: `const PORT = 8080;`
3. 希望するポートに変更します（Vencordプラグインのポート設定と一致する必要があります）
4. スクリプトを保存します

## 使用方法

### 基本的な使用方法

1. **YouTubeライブストリーム**（またはアーカイブされたストリーム）の視聴を開始します
2. タイムスタンプメッセージが投稿されているチャンネルで **Discordを開きます**
3. コンテキストメニューから **自動スクロールを有効にします**：
   - 任意のチャンネルを右クリック
   - **「タイムスタンプ自動スクロールを有効にする」**を選択（チェックボックスに現在の状態が表示されます）
4. プラグインは現在のストリームタイムスタンプに一致するメッセージに自動的にスクロールします

**注意**: チャンネルやサーバーを切り替えると、自動スクロールは自動的にオフになります。新しいチャンネルで再度有効にする必要があります。

### リダイレクトタイムスタンプの設定

任意のメッセージから手動でリダイレクトタイムスタンプを設定できます：

1. タイムスタンプ付きのメッセージを右クリックします
2. **「リダイレクトタイムスタンプとして設定」**を選択します
3. YouTubeストリームがそのタイムスタンプにジャンプします（サポートされている場合）
